# meme-commons â€” LLMé©±åŠ¨çš„æ¢—æ–‡åŒ–æ™ºèƒ½åˆ†æå¹³å°

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)](https://streamlit.io/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## ğŸ“– é¡¹ç›®ç®€ä»‹

meme-commonsæ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç¼–æ’çš„æ™ºèƒ½åŒ–æ¢—æ–‡åŒ–æƒ…æŠ¥æ”¶é›†ã€åˆ†æå’ŒæŸ¥è¯¢ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿé€šè¿‡MCPï¼ˆModel Context Protocolï¼‰åè®®æä¾›ç»Ÿä¸€çš„æœåŠ¡æ¥å£ï¼Œæ”¯æŒå¤šå¹³å°å†…å®¹çˆ¬å–ã€æ™ºèƒ½åˆ†æã€è¶‹åŠ¿é¢„æµ‹å’ŒçŸ¥è¯†ç®¡ç†ï¼Œä¸ºæ¢—æ–‡åŒ–ç ”ç©¶æä¾›å®Œæ•´çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚

### ğŸ¯ æ ¸å¿ƒç›®æ ‡

- **æ™ºèƒ½åŒ–å†…å®¹å‘ç°**: åˆ©ç”¨LLMè‡ªåŠ¨è¯†åˆ«å’Œåˆ†æç½‘ç»œçƒ­æ¢—
- **å¤šå¹³å°æ•°æ®æ•´åˆ**: ç»Ÿä¸€ç®¡ç†æ¥è‡ªä¸åŒç¤¾äº¤åª’ä½“å¹³å°çš„å†…å®¹
- **è¶‹åŠ¿åˆ†æé¢„æµ‹**: åŸºäºå†å²æ•°æ®é¢„æµ‹æ¢—æ–‡åŒ–çš„æ¼”è¿›æ–¹å‘
- **çŸ¥è¯†å›¾è°±æ„å»º**: æ„å»ºç»“æ„åŒ–çš„æ¢—æ–‡åŒ–çŸ¥è¯†åº“
- **å®æ—¶ç›‘æ§åˆ†æ**: æä¾›å®æ—¶çš„æ¢—æ–‡åŒ–å˜åŒ–è¶‹åŠ¿ç›‘æ§

### ğŸŒŸ ä¸»è¦ç‰¹è‰²

- **ğŸ¤– LLMæ™ºèƒ½ç¼–æ’**: åŸºäºå…ˆè¿›å¤§è¯­è¨€æ¨¡å‹çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ
- **ğŸŒ å¤šå¹³å°æ”¯æŒ**: æ”¯æŒæŠ–éŸ³ã€å¾®åšã€Bç«™ã€çŸ¥ä¹ã€å°çº¢ä¹¦ã€è´´å§ç­‰ä¸»æµä¸­æ–‡å¹³å°
- **ğŸ“Š æ™ºèƒ½åˆ†æ**: é›†æˆæ–‡æœ¬åµŒå…¥ã€è¯­ä¹‰æœç´¢ã€è¶‹åŠ¿åˆ†æç­‰AIèƒ½åŠ›
- **ğŸ” ç²¾å‡†æœç´¢**: åŸºäºå‘é‡ç›¸ä¼¼æ€§çš„æ™ºèƒ½æœç´¢å¼•æ“
- **ğŸ“ˆ è¶‹åŠ¿é¢„æµ‹**: å®æ—¶åˆ†ææ¢—æ–‡åŒ–çƒ­åº¦å’Œæ¼”è¿›è¶‹åŠ¿
- **ğŸ¯ è‡ªåŠ¨åŒ–æµç¨‹**: ä¸€é”®å¼å®Œæ•´åˆ†ææµç¨‹ï¼Œä»çˆ¬å–åˆ°çŸ¥è¯†å¡ç”Ÿæˆ
- **ğŸ–¥ï¸ å¯è§†åŒ–ç›‘æ§**: åŸºäºStreamlitçš„å®æ—¶ç›‘æ§å’Œç®¡ç†ç•Œé¢
- **ğŸ”§ æ¨¡å—åŒ–è®¾è®¡**: é«˜åº¦æ¨¡å—åŒ–çš„æ¶æ„ï¼Œä¾¿äºæ‰©å±•å’Œå®šåˆ¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢      â”‚    â”‚   ç›‘æ§ç•Œé¢      â”‚    â”‚   APIå®¢æˆ·ç«¯     â”‚
â”‚ (Streamlit App) â”‚    â”‚ (è‡ªåŠ¨åŒ–ç›‘æ§)    â”‚    â”‚   (REST API)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MCPæœåŠ¡å™¨å±‚                        â”‚
â”‚           (FastAPI + MCPåè®®)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ çŸ¥è¯†ç»Ÿè®¡API â”‚  â”‚ è‡ªåŠ¨åŒ–æµç¨‹APIâ”‚  â”‚ å…¶ä»–API  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LLMåè°ƒå™¨å±‚                        â”‚
â”‚           (Orchestrator)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  çˆ¬å–å·¥å…·   â”‚  â”‚  åˆ†æå·¥å…·   â”‚  â”‚ æŸ¥è¯¢å·¥å…· â”‚ â”‚
â”‚  â”‚   (Crawler) â”‚  â”‚ (Analyzer)  â”‚  â”‚ (Query) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®å­˜å‚¨å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å…³ç³»æ•°æ®åº“  â”‚  â”‚ å‘é‡æ•°æ®åº“  â”‚  â”‚ ä»»åŠ¡é˜Ÿåˆ— â”‚ â”‚
â”‚  â”‚ (SQLite/PG) â”‚  â”‚ (Vector DB) â”‚  â”‚ (Redis) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

1. **MCPæœåŠ¡å™¨**: åŸºäºFastAPIçš„RESTful APIæœåŠ¡ï¼Œæä¾›æ ‡å‡†åŒ–çš„æ¥å£
2. **LLMåè°ƒå™¨**: æ ¸å¿ƒè°ƒåº¦å¼•æ“ï¼Œç»Ÿä¸€ç®¡ç†å’Œåè°ƒå„åŠŸèƒ½æ¨¡å—
3. **æ•°æ®ç®¡ç†å±‚**: å¤„ç†æ•°æ®å­˜å‚¨ã€æ£€ç´¢å’Œç®¡ç†
4. **å·¥å…·æ¨¡å—**: ç‹¬ç«‹çš„å·¥å…·ç»„ä»¶ï¼Œæ‰§è¡Œå…·ä½“çš„åŠŸèƒ½ä»»åŠ¡
5. **å‰ç«¯ç•Œé¢**: ç”¨æˆ·äº¤äº’å’Œå¯è§†åŒ–å±•ç¤º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Python**: 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Linux/macOS/Windows
- **å†…å­˜**: å»ºè®® 4GB+
- **å­˜å‚¨**: å»ºè®® 10GB+ å¯ç”¨ç©ºé—´

### ç¯å¢ƒå‡†å¤‡

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-org/meme-commons.git
cd meme-commons
```

#### 2. åˆ›å»ºPythonç¯å¢ƒ

**ä½¿ç”¨condaï¼ˆæ¨èï¼‰**:
```bash
# åˆ›å»ºç‹¬ç«‹ç¯å¢ƒ
conda create -n meme-commons python=3.11 -y
conda activate meme-commons

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**ä½¿ç”¨venv**:
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv-meme
source venv-meme/bin/activate  # Linux/macOS
# venv-meme\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### 3. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

**å®Œæ•´é…ç½®ç¤ºä¾‹**:
```bash
# ===========================================
# æ•°æ®åº“é…ç½®
# ===========================================
DATABASE_URL=sqlite:///meme_commons.db
# ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨PostgreSQL:
# DATABASE_URL=postgresql://user:password@localhost:5432/meme_commons

# ===========================================
# APIå¯†é’¥é…ç½®  
# ===========================================
# Dashscope API (é˜¿é‡Œäº‘)
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# OpenAI API (å¯é€‰)
OPENAI_API_KEY=your_openai_api_key_here

# ===========================================
# MCPæœåŠ¡å™¨é…ç½®
# ===========================================
MCP_HOST=0.0.0.0
MCP_PORT=8002

# ===========================================
# å‰ç«¯ç•Œé¢é…ç½®
# =========================================== 
STREAMLIT_PORT=8501
STREAMLIT_HOST=0.0.0.0

# ===========================================
# Cookieé…ç½® (é‡è¦!)
# ===========================================
# é…ç½®å„å¹³å°Cookieå¯æ˜¾è‘—æé«˜æ•°æ®è·å–è´¨é‡
DOUYIN_COOKIE=your_douyin_cookie_here
WEIBO_COOKIE=your_weibo_cookie_here  
BILIBILI_COOKIE=your_bilibili_cookie_here
ZHIHU_COOKIE=your_zhihu_cookie_here
XIAOHONGSHU_COOKIE=your_xiaohongshu_cookie_here
TIEBA_COOKIE=your_tieba_cookie_here

# ===========================================
# é«˜çº§é…ç½®
# ===========================================
# å‘é‡åµŒå…¥æ¨¡å‹
EMBEDDING_MODEL=text-embedding-v2

# æœ€å¤§å¹¶å‘æ•°
MAX_CONCURRENT_REQUESTS=10

# è¯·æ±‚é—´éš” (ç§’)
REQUEST_INTERVAL=1

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO
```

### ğŸª Cookieé…ç½®è¯¦ç»†è¯´æ˜

Cookieé…ç½®æ˜¯è·å–é«˜è´¨é‡æ•°æ®çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯å„å¹³å°Cookieè·å–æ–¹æ³•ï¼š

#### è·å–Cookieçš„é€šç”¨æ­¥éª¤
1. **æ‰“å¼€å¹³å°ç½‘ç«™**: ä½¿ç”¨Chrome/Firefoxæµè§ˆå™¨
2. **ç™»å½•è´¦æˆ·**: ç¡®ä¿å·²æ­£å¸¸ç™»å½•
3. **æ‰“å¼€å¼€å‘è€…å·¥å…·**: æŒ‰F12æˆ–å³é”®â†’æ£€æŸ¥
4. **å®šä½Cookie**: 
   - Chrome: Application â†’ Storage â†’ Cookies
   - Firefox: Storage â†’ Cookies
5. **å¤åˆ¶Cookieå€¼**: é€‰æ‹©å¯¹åº”åŸŸåï¼Œå¤åˆ¶å®Œæ•´çš„Cookieå­—ç¬¦ä¸²

#### å„å¹³å°è®¿é—®åœ°å€

| å¹³å° | è®¿é—®åœ°å€ | CookieåŸŸå |
|------|----------|------------|
| æŠ–éŸ³ | https://www.douyin.com | .douyin.com |
| å¾®åš | https://www.weibo.com | .weibo.com |
| Bç«™ | https://www.bilibili.com | .bilibili.com |
| çŸ¥ä¹ | https://www.zhihu.com | .zhihu.com |
| å°çº¢ä¹¦ | https://www.xiaohongshu.com | .xiaohongshu.com |
| è´´å§ | https://tieba.baidu.com | .tieba.baidu.com |

### 4. ç³»ç»Ÿå¯åŠ¨

#### ğŸ¯ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

æˆ‘ä»¬æä¾›äº†ç®€åŒ–çš„å¯åŠ¨è„šæœ¬ï¼š

```bash
# å®Œæ•´å¯åŠ¨ï¼ˆåŒ…æ‹¬å‰ç«¯å’Œåç«¯ï¼‰
./run.sh

# ä»…å®‰è£…ä¾èµ–
./run.sh --deps-only

# æŸ¥çœ‹å¸®åŠ©
./run.sh --help
```

#### ğŸ”§ æ‰‹åŠ¨å¯åŠ¨

**å¯åŠ¨åç«¯æœåŠ¡ï¼ˆMCPæœåŠ¡å™¨ï¼‰**:
```bash
# æ–¹æ³•1: ç›´æ¥å¯åŠ¨
python main.py

# æ–¹æ³•2: åå°è¿è¡Œ
nohup python main.py > backend.log 2>&1 &
echo $! > backend.pid

# æ–¹æ³•3: ä½¿ç”¨systemd (Linux)
sudo systemctl start meme-commons-backend
```

**å¯åŠ¨å‰ç«¯ç•Œé¢**:
```bash
# æ–¹æ³•1: ç›´æ¥å¯åŠ¨
streamlit run automation_monitor.py --server.port 8501 --server.address 0.0.0.0

# æ–¹æ³•2: åå°è¿è¡Œ
nohup streamlit run automation_monitor.py --server.port 8501 --server.address 0.0.0.0 > frontend.log 2>&1 &
echo $! > frontend.pid

# æ–¹æ³•3: ä½¿ç”¨systemd (Linux)
sudo systemctl start meme-commons-frontend
```

#### âœ… å¯åŠ¨éªŒè¯

**æ£€æŸ¥æœåŠ¡çŠ¶æ€**:
```bash
# æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
curl http://localhost:8002/health

# æ£€æŸ¥å‰ç«¯ç•Œé¢
curl http://localhost:8501

# æŸ¥çœ‹æœåŠ¡ç«¯å£
netstat -tuln | grep -E ":(8002|8501)"
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "healthy",
  "database": "connected",
  "version": "1.0.0",
  "services": {
    "mcp_server": "running",
    "database": "connected",
    "vector_store": "ready"
  }
}
```

### 5. è®¿é—®ç³»ç»Ÿ

å¯åŠ¨æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ç³»ç»Ÿï¼š

- **ğŸ›ï¸ è‡ªåŠ¨åŒ–ç›‘æ§ç•Œé¢**: http://localhost:8501
- **ğŸ”§ åç«¯APIæ–‡æ¡£**: http://localhost:8002/docs
- **â¤ï¸ å¥åº·æ£€æŸ¥**: http://localhost:8002/health
- **ğŸ“Š çŸ¥è¯†ç»Ÿè®¡**: http://localhost:8002/mcp/knowledge/stats
- **ğŸ“ˆ ç³»ç»ŸçŠ¶æ€**: http://localhost:8002/mcp/status

## ğŸ“š è¯¦ç»†ä½¿ç”¨æŒ‡å—

### ğŸ” çŸ¥è¯†åº“æŸ¥è¯¢

#### åŸºç¡€æŸ¥è¯¢
```bash
# æŒ‰å…³é”®è¯æŸ¥è¯¢æ¢—çŸ¥è¯†
curl "http://localhost:8002/mcp/knowledge?q=æ¢—æ–‡åŒ–&limit=10"

# æŒ‰åˆ†ç±»æŸ¥è¯¢
curl "http://localhost:8002/mcp/knowledge?category=æç¬‘&limit=20"

# é«˜çº§æŸ¥è¯¢ï¼ˆåŒ…å«ç­›é€‰æ¡ä»¶ï¼‰
curl "http://localhost:8002/mcp/knowledge?q=äººå·¥æ™ºèƒ½&min_trend_score=0.5&limit=15"
```

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": {
    "results": [
      {
        "id": "meme_001",
        "name": "AIæ¢—",
        "description": "ä¸äººå·¥æ™ºèƒ½ç›¸å…³çš„å¹½é»˜å†…å®¹",
        "category": "ç§‘æŠ€",
        "keywords": ["AI", "äººå·¥æ™ºèƒ½", "æœºå™¨äºº"],
        "trend_score": 0.85,
        "popularity_score": 0.72,
        "source_platforms": ["å¾®åš", "Bç«™"],
        "last_updated": "2024-01-15T10:30:00Z"
      }
    ],
    "total": 1,
    "query_time": 0.156
  }
}
```

### ğŸ“Š çŸ¥è¯†ç»Ÿè®¡åŠŸèƒ½

#### è·å–çŸ¥è¯†åº“æ•´ä½“ç»Ÿè®¡
```bash
# è·å–å®Œæ•´ç»Ÿè®¡ä¿¡æ¯
curl "http://localhost:8002/mcp/knowledge/stats"
```

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": {
    "total_cards": 1247,
    "avg_trend_score": 0.67,
    "recent_cards": 89,
    "high_trend_cards": 156,
    "popular_tags": ["æ¢—æ–‡åŒ–", "æç¬‘", "æ²™é›•", "è¡¨æƒ…åŒ…"]
  },
  "timestamp": "2024-01-15T12:00:00Z"
}
```

### ğŸ¤– è‡ªåŠ¨åŒ–æµç¨‹

#### 1. å†…å®¹çˆ¬å–ä»»åŠ¡

**åŸºç¡€çˆ¬å–**:
```bash
# çˆ¬å–æŠ–éŸ³çƒ­é—¨å†…å®¹
curl -X POST "http://localhost:8002/mcp/automation/crawl" \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "douyin",
    "keywords": ["æ¢—", "æç¬‘"],
    "limit": 50
  }'
```

**é«˜çº§çˆ¬å–**:
```bash
# å¤šå¹³å°å¹¶å‘çˆ¬å–
curl -X POST "http://localhost:8002/mcp/automation/crawl" \
  -H "Content-Type: application/json" \
  -d '{
    "platforms": ["douyin", "weibo", "bilibili"],
    "keywords": ["æ¢—æ–‡åŒ–", "meme", "æ²™é›•"],
    "limit": 200,
    "use_cookies": true,
    "sort_by": "popularity"
  }'
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "task_id": "crawl_1763098549.352884",
  "message": "Crawl task submitted successfully"
}
```

#### 2. å®Œæ•´åˆ†ææµç¨‹

**ä¸€é”®å¼åˆ†ææµç¨‹**:
```bash
# æäº¤å®Œæ•´æµç¨‹ä»»åŠ¡ï¼ˆçˆ¬å–â†’æ¸…æ´—â†’åˆ†æâ†’ç”ŸæˆçŸ¥è¯†å¡ï¼‰
curl -X POST "http://localhost:8002/mcp/automation/full_pipeline" \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "weibo",
    "keywords": ["æ¢—", "meme"],
    "limit": 100,
    "analysis_config": {
      "min_posts_threshold": 10,
      "trend_threshold": 0.6,
      "generate_knowledge_cards": true
    }
  }'
```

**å®Œæ•´æµç¨‹ä»»åŠ¡å“åº”**:
```json
{
  "success": true,
  "task_id": "pipeline_1763098575.611754",
  "message": "Full pipeline task submitted successfully"
}
```

#### 3. ä»»åŠ¡çŠ¶æ€ç›‘æ§

**æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€**:
```bash
# è·å–æ‰€æœ‰ä»»åŠ¡çŠ¶æ€
curl "http://localhost:8002/mcp/automation/tasks"

# æŸ¥è¯¢ç‰¹å®šä»»åŠ¡çŠ¶æ€
curl "http://localhost:8002/mcp/automation/tasks/task_1763098549.352884"
```

**ä»»åŠ¡çŠ¶æ€å“åº”**:
```json
{
  "success": true,
  "data": {
    "crawl_1763098549.352884": {
      "status": "completed",
      "progress": 100,
      "result": {
        "total_crawled": 156,
        "valid_posts": 142,
        "crawled_platforms": ["douyin", "weibo"]
      },
      "start_time": "2024-01-15T10:00:00Z",
      "end_time": "2024-01-15T10:05:30Z"
    }
  }
}
```

#### 4. ç‹¬ç«‹åˆ†æä»»åŠ¡

**å¯åŠ¨åˆ†æä»»åŠ¡**:
```bash
# å¯¹ç°æœ‰æ•°æ®è¿›è¡Œåˆ†æ
curl -X POST "http://localhost:8002/mcp/automation/analysis" \
  -H "Content-Type: application/json" \
  -d '{
    "min_posts_threshold": 5,
    "trend_analysis_config": {
      "time_window": "7d",
      "min_trend_score": 0.5
    }
  }'
```

### ğŸ“ˆ è¶‹åŠ¿åˆ†æ

#### è·å–çƒ­é—¨æ¢—æ’è¡Œ
```bash
# è·å–24å°æ—¶çƒ­é—¨æ¢—
curl "http://localhost:8002/mcp/trending?time_window=24h&limit=20"

# è·å–å‘¨çƒ­é—¨æ¢—
curl "http://localhost:8002/mcp/trending?time_window=7d&limit=50"
```

#### åˆ†æç‰¹å®šæ¢—çš„è¶‹åŠ¿
```bash
# åˆ†æå•ä¸ªæ¢—çš„è¶‹åŠ¿
curl -X POST "http://localhost:8002/mcp/trend/analyze" \
  -H "Content-Type: application/json" \
  -d '{
    "meme_id": "meme_001",
    "time_window": "30d",
    "prediction_days": 7
  }'
```

### ğŸ“ å†…å®¹æ€»ç»“

#### æ–‡æœ¬æ€»ç»“
```bash
# æ€»ç»“å•æ®µæ–‡æœ¬
curl -X POST "http://localhost:8002/mcp/summarize" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "è¿™æ˜¯è¦æ€»ç»“çš„æ–‡æœ¬å†…å®¹...",
    "summary_type": "brief",
    "max_length": 200
  }'

# æ‰¹é‡æ€»ç»“
curl -X POST "http://localhost:8002/mcp/summarize/batch" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": ["æ–‡æœ¬1", "æ–‡æœ¬2", "æ–‡æœ¬3"],
    "summary_type": "detailed"
  }'
```

## ğŸ–¥ï¸ ç›‘æ§ç•Œé¢ä½¿ç”¨

### è‡ªåŠ¨åŒ–ç›‘æ§ç•Œé¢

è®¿é—® http://localhost:8501 æ‰“å¼€è‡ªåŠ¨åŒ–ç›‘æ§ç•Œé¢ï¼Œè¯¥ç•Œé¢æä¾›ï¼š

#### ğŸ“Š å®æ—¶ç›‘æ§é¢æ¿
- **ä»»åŠ¡çŠ¶æ€æ€»è§ˆ**: å®æ—¶æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œä¸­çš„ä»»åŠ¡
- **ç³»ç»Ÿèµ„æºç›‘æ§**: CPUã€å†…å­˜ã€æ•°æ®åº“çŠ¶æ€
- **çˆ¬å–ç»Ÿè®¡**: å„å¹³å°æ•°æ®çˆ¬å–ç»Ÿè®¡
- **é”™è¯¯æ—¥å¿—**: å®æ—¶é”™è¯¯ç›‘æ§å’ŒæŠ¥è­¦

#### ğŸ”§ ä»»åŠ¡ç®¡ç†
- **ä»»åŠ¡åˆ—è¡¨**: æ˜¾ç¤ºæ‰€æœ‰å†å²å’Œå½“å‰ä»»åŠ¡
- **ä»»åŠ¡è¯¦æƒ…**: æŸ¥çœ‹å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¯¦æƒ…å’Œç»“æœ
- **ä»»åŠ¡æ§åˆ¶**: æš‚åœã€æ¢å¤ã€å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡

#### ğŸ“ˆ æ•°æ®ç»Ÿè®¡
- **çŸ¥è¯†åº“ç»Ÿè®¡**: æ€»å¡æ•°ã€è¶‹åŠ¿åˆ†æã€åˆ†ç±»åˆ†å¸ƒ
- **çˆ¬å–æ•ˆæœ**: å„å¹³å°æ•°æ®è´¨é‡å’Œæ•°é‡ç»Ÿè®¡
- **ç³»ç»Ÿæ€§èƒ½**: APIå“åº”æ—¶é—´ã€å¹¶å‘å¤„ç†èƒ½åŠ›

### ç•Œé¢åŠŸèƒ½è¯´æ˜

1. **æ¦‚è§ˆé¡µé¢**: ç³»ç»Ÿæ•´ä½“çŠ¶æ€å’Œå…³é”®æŒ‡æ ‡
2. **ä»»åŠ¡ç›‘æ§**: å®æ—¶ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€å’Œè¿›åº¦
3. **æ•°æ®ç®¡ç†**: çŸ¥è¯†åº“æ•°æ®çš„æµè§ˆå’Œç®¡ç†
4. **ç³»ç»Ÿè®¾ç½®**: é…ç½®å‚æ•°è°ƒæ•´å’Œç³»ç»Ÿä¼˜åŒ–

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
meme-commons/
â”œâ”€â”€ ğŸ“ server/                    # æœåŠ¡å™¨ç›¸å…³
â”‚   â”œâ”€â”€ mcp_server.py            # MCPæœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ğŸ“ database/                  # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ğŸ“ tools/                     # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ crawler.py               # çˆ¬å–å·¥å…·
â”‚   â”œâ”€â”€ embedding.py             # å‘é‡åµŒå…¥
â”‚   â”œâ”€â”€ query.py                 # æŸ¥è¯¢å·¥å…·
â”‚   â”œâ”€â”€ summarizer.py            # æ€»ç»“å·¥å…·
â”‚   â””â”€â”€ trend_analysis.py        # è¶‹åŠ¿åˆ†æ
â”œâ”€â”€ ğŸ“ orchestrator/              # LLMåè°ƒå™¨
â”‚   â”œâ”€â”€ orchestrator.py          # æ ¸å¿ƒåè°ƒå™¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ğŸ“ automation_monitor.py      # Streamlitç›‘æ§ç•Œé¢
â”œâ”€â”€ ğŸ“ main.py                    # åº”ç”¨å…¥å£
â”œâ”€â”€ ğŸ“ config.py                  # é…ç½®ç®¡ç†
â”œâ”€â”€ ğŸ“ requirements.txt           # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ ğŸ“ .env.example              # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”œâ”€â”€ ğŸ“ run.sh                    # å¯åŠ¨è„šæœ¬
â””â”€â”€ ğŸ“ README.md                 # é¡¹ç›®æ–‡æ¡£
```

### æ·»åŠ æ–°å·¥å…·æ¨¡å—

#### 1. åˆ›å»ºå·¥å…·æ¨¡å—

åœ¨`tools/`ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å·¥å…·æ–‡ä»¶ï¼š

```python
# tools/new_tool.py
from typing import Dict, List, Any
import asyncio

class NewTool:
    """æ–°å·¥å…·æ¨¡å—è¯´æ˜"""
    
    def __init__(self, config: Dict[str, Any]):
        self.config = config
        
    async def execute(self, **kwargs) -> Dict[str, Any]:
        """æ‰§è¡Œå·¥å…·åŠŸèƒ½"""
        # å®ç°å…·ä½“åŠŸèƒ½
        pass
        
    def get_capabilities(self) -> List[str]:
        """è¿”å›å·¥å…·èƒ½åŠ›åˆ—è¡¨"""
        return ["capability1", "capability2"]
```

#### 2. æ³¨å†Œå·¥å…·åˆ°åè°ƒå™¨

åœ¨`orchestrator.py`ä¸­æ³¨å†Œæ–°å·¥å…·ï¼š

```python
# orchestrator/orchestrator.py
from tools.new_tool import NewTool

class LLMOrchestrator:
    def __init__(self, config):
        # æ³¨å†Œæ–°å·¥å…·
        self.register_tool("new_tool", NewTool(config))
        
    async def execute_tool(self, tool_name: str, **kwargs):
        # å·¥å…·æ‰§è¡Œé€»è¾‘
        pass
```

#### 3. æ·»åŠ APIæ¥å£

åœ¨MCPæœåŠ¡å™¨ä¸­æ·»åŠ ç›¸åº”æ¥å£ï¼š

```python
# server/mcp_server.py
from orchestrator import LLMOrchestrator

@app.post("/mcp/new_tool/execute")
async def execute_new_tool(request: dict):
    """æ–°å·¥å…·APIæ¥å£"""
    result = await orchestrator.execute_tool("new_tool", **request)
    return {"success": True, "data": result}
```

### è‡ªå®šä¹‰å·¥ä½œæµç¨‹

#### åˆ›å»ºå¤æ‚å·¥ä½œæµç¨‹

```python
# è‡ªå®šä¹‰å·¥ä½œæµç¨‹ç¤ºä¾‹
workflow_config = {
    "steps": [
        {
            "step": "crawl_content",
            "tool": "crawler",
            "params": {
                "platforms": ["weibo", "douyin"],
                "keywords": ["æ¢—æ–‡åŒ–"],
                "limit": 100
            },
            "timeout": 300
        },
        {
            "step": "clean_content",
            "tool": "cleaner",
            "depends_on": "crawl_content",
            "params": {
                "min_length": 10,
                "remove_duplicates": True
            }
        },
        {
            "step": "analyze_content", 
            "tool": "analyzer",
            "depends_on": "clean_content",
            "params": {
                "trend_threshold": 0.6,
                "generate_embeddings": True
            }
        },
        {
            "step": "generate_knowledge_cards",
            "tool": "summarizer", 
            "depends_on": "analyze_content",
            "params": {
                "card_template": "meme_template",
                "auto_approve": False
            }
        }
    ],
    "error_handling": {
        "retry_attempts": 3,
        "continue_on_error": False
    }
}

# æ‰§è¡Œå·¥ä½œæµç¨‹
result = await orchestrator.execute_workflow(workflow_config)
```

## ğŸ”§ é«˜çº§é…ç½®

### æ•°æ®åº“ä¼˜åŒ–

#### SQLiteä¼˜åŒ–é…ç½®
```sql
-- å¯ç”¨WALæ¨¡å¼æé«˜å¹¶å‘æ€§èƒ½
PRAGMA journal_mode=WAL;
PRAGMA synchronous=NORMAL;
PRAGMA cache_size=10000;
PRAGMA temp_store=memory;
```

#### PostgreSQLé…ç½®ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
```bash
# postgresql.conf å…³é”®é…ç½®
shared_buffers = 256MB
effective_cache_size = 1GB
maintenance_work_mem = 64MB
checkpoint_completion_target = 0.9
wal_buffers = 16MB
default_statistics_target = 100
random_page_cost = 1.1
effective_io_concurrency = 200
```

### æ€§èƒ½è°ƒä¼˜

#### MCPæœåŠ¡å™¨è°ƒä¼˜
```bash
# .env æ€§èƒ½ç›¸å…³é…ç½®
# Workerè¿›ç¨‹æ•°é‡ï¼ˆå»ºè®®CPUæ ¸å¿ƒæ•°ï¼‰
WORKERS=4

# æœ€å¤§è¿æ¥æ•°
MAX_CONNECTIONS=1000

# è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
TIMEOUT=30

# å¯ç”¨å‹ç¼©
ENABLE_COMPRESSION=true

# ç¼“å­˜é…ç½®
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
```

#### çˆ¬è™«è°ƒä¼˜
```bash
# å¹¶å‘æ§åˆ¶
MAX_CONCURRENT_REQUESTS=10
REQUESTS_PER_SECOND=5

# é‡è¯•æœºåˆ¶
MAX_RETRIES=3
RETRY_DELAY=2

# è¶…æ—¶è®¾ç½®
REQUEST_TIMEOUT=30
READ_TIMEOUT=60
```

### ç›‘æ§å’Œæ—¥å¿—

#### æ—¥å¿—é…ç½®
```python
# config.py æ—¥å¿—é…ç½®
LOGGING_CONFIG = {
    "version": 1,
    "disable_existing_loggers": False,
    "formatters": {
        "standard": {
            "format": "%(asctime)s [%(levelname)s] %(name)s: %(message)s"
        },
    },
    "handlers": {
        "default": {
            "level": "INFO",
            "formatter": "standard",
            "class": "logging.StreamHandler",
        },
        "file": {
            "level": "DEBUG",
            "formatter": "standard", 
            "class": "logging.handlers.RotatingFileHandler",
            "filename": "meme_commons.log",
            "maxBytes": 10485760,  # 10MB
            "backupCount": 5,
        },
    },
    "loggers": {
        "": {
            "handlers": ["default", "file"],
            "level": "DEBUG",
            "propagate": False
        }
    }
}
```

#### ç›‘æ§æŒ‡æ ‡
ç³»ç»Ÿæä¾›ä»¥ä¸‹ç›‘æ§æŒ‡æ ‡ï¼š

- **æ€§èƒ½æŒ‡æ ‡**: å“åº”æ—¶é—´ã€ååé‡ã€é”™è¯¯ç‡
- **èµ„æºæŒ‡æ ‡**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- **ä¸šåŠ¡æŒ‡æ ‡**: çˆ¬å–æˆåŠŸç‡ã€çŸ¥è¯†å¡ç”Ÿæˆæ•°é‡
- **æ•°æ®åº“æŒ‡æ ‡**: è¿æ¥æ•°ã€æŸ¥è¯¢æ€§èƒ½ã€ç´¢å¼•ä½¿ç”¨ç‡

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥

**é—®é¢˜**: `Address already in use`
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8002
lsof -i :8501

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨ç«¯å£é‡æ˜ å°„
export MCP_PORT=8003
export STREAMLIT_PORT=8502
```

**é—®é¢˜**: `Database connection failed`
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la meme_commons.db

# ä¿®å¤æƒé™
chmod 664 meme_commons.db

# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
rm meme_commons.db
python -c "from database.models import init_db; init_db()"
```

#### 2. çˆ¬å–åŠŸèƒ½å¼‚å¸¸

**é—®é¢˜**: `Cookie expired or invalid`
```bash
# é‡æ–°è·å–Cookie
# 1. æ¸…é™¤æµè§ˆå™¨Cookie
# 2. é‡æ–°ç™»å½•å„å¹³å°
# 3. æ›´æ–°.envæ–‡ä»¶ä¸­çš„Cookieé…ç½®
# 4. é‡å¯æœåŠ¡
```

**é—®é¢˜**: `Rate limit exceeded`
```bash
# å¢åŠ è¯·æ±‚é—´éš”
export REQUEST_INTERVAL=3
export MAX_CONCURRENT_REQUESTS=5

# æ£€æŸ¥å¹³å°é™åˆ¶ç­–ç•¥
# è°ƒæ•´çˆ¬å–ç­–ç•¥
```

#### 3. APIè°ƒç”¨å¤±è´¥

**é—®é¢˜**: `Knowledge card statistics API failed`
```bash
# æ£€æŸ¥çŸ¥è¯†åº“åˆå§‹åŒ–
curl http://localhost:8002/mcp/status

# é‡æ–°åˆå§‹åŒ–çŸ¥è¯†åº“
curl -X POST http://localhost:8002/mcp/knowledge/init
```

**é—®é¢˜**: `LLM API quota exceeded`
```bash
# æ£€æŸ¥APIé…é¢ä½¿ç”¨æƒ…å†µ
curl http://localhost:8002/mcp/system/usage

# åˆ‡æ¢åˆ°å¤‡ç”¨APIæˆ–ç­‰å¾…é…é¢é‡ç½®
export DASHSCOPE_API_KEY=backup_key
```

#### 4. ç›‘æ§ç•Œé¢é—®é¢˜

**é—®é¢˜**: `Streamlit connection failed`
```bash
# æ£€æŸ¥Streamlitæ—¥å¿—
tail -f streamlit.log

# é‡æ–°å¯åŠ¨Streamlit
streamlit run automation_monitor.py --server.port 8501 --server.address 0.0.0.0 --logger.level debug
```

### æ—¥å¿—åˆ†æ

#### å…³é”®æ—¥å¿—æ–‡ä»¶
```bash
# åº”ç”¨æ—¥å¿—
tail -f meme_commons.log

# MCPæœåŠ¡å™¨æ—¥å¿—
tail -f backend.log

# Streamlitæ—¥å¿—  
tail -f frontend.log

# çˆ¬è™«è¯¦ç»†æ—¥å¿—
tail -f crawler.log

# é”™è¯¯ä¸“ç”¨æ—¥å¿—
grep ERROR meme_commons.log
```

#### å¸¸è§é”™è¯¯æ¨¡å¼
```
ERROR [crawler] Rate limit exceeded for platform douyin
WARNING [orchestrator] Task timeout: crawl_task_123
ERROR [database] Connection pool exhausted
WARNING [llm] API response slow: 15.2s
```

### æ€§èƒ½é—®é¢˜è¯Šæ–­

#### 1. ç³»ç»Ÿèµ„æºæ£€æŸ¥
```bash
# CPUå’Œå†…å­˜ä½¿ç”¨
top -p $(pgrep -f "python main.py")

# ç£ç›˜ç©ºé—´
df -h

# ç½‘ç»œè¿æ¥
netstat -an | grep :8002
```

#### 2. æ•°æ®åº“æ€§èƒ½
```sql
-- SQLiteæ€§èƒ½æ£€æŸ¥
PRAGMA compile_options;
PRAGMA database_list;

-- æ…¢æŸ¥è¯¢åˆ†æ
EXPLAIN QUERY PLAN SELECT * FROM knowledge_cards WHERE category = 'æç¬‘';
```

#### 3. APIæ€§èƒ½æµ‹è¯•
```bash
# è´Ÿè½½æµ‹è¯•
ab -n 1000 -c 10 http://localhost:8002/health

# å“åº”æ—¶é—´æµ‹è¯•
curl -w "@curl-format.txt" -o /dev/null -s "http://localhost:8002/mcp/knowledge/stats"

# curl-format.txt å†…å®¹:
#      time_namelookup:  %{time_namelookup}\n
#         time_connect:  %{time_connect}\n
#      time_appconnect:  %{time_appconnect}\n
#     time_pretransfer:  %{time_pretransfer}\n
#        time_redirect:  %{time_redirect}\n
#   time_starttransfer:  %{time_starttransfer}\n
#                     ----------\n
#           time_total:  %{time_total}\n
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### APIå®‰å…¨

#### 1. è®¿é—®æ§åˆ¶
```python
# æ·»åŠ APIå¯†é’¥éªŒè¯
from fastapi import Header, HTTPException

async def verify_api_key(x_api_key: str = Header()):
    valid_keys = ["key1", "key2"]
    if x_api_key not in valid_keys:
        raise HTTPException(status_code=401, detail="Invalid API key")
    return x_api_key

@app.get("/mcp/knowledge")
async def get_knowledge(api_key: str = Depends(verify_api_key)):
    # APIå®ç°
    pass
```

#### 2. é™æµé…ç½®
```python
# é™æµä¸­é—´ä»¶
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address
from slowapi.errors import RateLimitExceeded

limiter = Limiter(key_func=get_remote_address)

@app.get("/mcp/knowledge")
@limiter.limit("100/minute")
async def get_knowledge(request: Request):
    # APIå®ç°
    pass
```

### æ•°æ®å®‰å…¨

#### 1. æ•æ„Ÿæ•°æ®åŠ å¯†
```python
# ä½¿ç”¨FernetåŠ å¯†æ•æ„Ÿé…ç½®
from cryptography.fernet import Fernet

# ç”Ÿæˆå¯†é’¥
key = Fernet.generate_key()
cipher_suite = Fernet(key)

# åŠ å¯†Cookieç­‰æ•æ„Ÿæ•°æ®
encrypted_cookie = cipher_suite.encrypt(b"cookie_content")

# è§£å¯†ä½¿ç”¨
decrypted_cookie = cipher_suite.decrypt(encrypted_cookie)
```

#### 2. æ•°æ®åº“å®‰å…¨
```bash
# è®¾ç½®æ•°æ®åº“æ–‡ä»¶æƒé™
chmod 600 meme_commons.db

# å¯ç”¨SQLiteåŠ å¯†
# åœ¨SQLiteç¼–è¯‘æ—¶å¯ç”¨åŠ å¯†æ”¯æŒ
```

## ğŸ“Š ç³»ç»Ÿç»´æŠ¤

### å®šæœŸç»´æŠ¤ä»»åŠ¡

#### 1. æ•°æ®åº“ç»´æŠ¤
```bash
# æ•°æ®åº“å¤‡ä»½
cp meme_commons.db "backup_$(date +%Y%m%d_%H%M%S).db"

# æ¸…ç†è¿‡æœŸæ•°æ®
curl -X POST http://localhost:8002/mcp/admin/cleanup \
  -d '{"older_than_days": 30}'

# æ•°æ®åº“ä¼˜åŒ–
sqlite3 meme_commons.db "VACUUM;"
sqlite3 meme_commons.db "ANALYZE;"
```

#### 2. æ—¥å¿—è½®è½¬
```bash
# é…ç½®logrotate
sudo cat > /etc/logrotate.d/meme-commons << EOF
/path/to/meme_commons/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 www-data www-data
}
EOF
```

#### 3. ç³»ç»Ÿç›‘æ§è„šæœ¬
```bash
#!/bin/bash
# monitoring.sh - ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
check_service() {
    if ! curl -f http://localhost:8002/health > /dev/null 2>&1; then
        echo "MCPæœåŠ¡å™¨å¼‚å¸¸"
        # é‡å¯æœåŠ¡
        pkill -f "python main.py"
        nohup python main.py > backend.log 2>&1 &
    fi
    
    if ! curl -f http://localhost:8501 > /dev/null 2>&1; then
        echo "StreamlitæœåŠ¡å¼‚å¸¸"
        # é‡å¯æœåŠ¡
        pkill -f "streamlit"
        nohup streamlit run automation_monitor.py --server.port 8501 --server.address 0.0.0.0 > frontend.log 2>&1 &
    fi
}

# æ£€æŸ¥ç£ç›˜ç©ºé—´
check_disk() {
    USAGE=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')
    if [ $USAGE -gt 90 ]; then
        echo "ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜: ${USAGE}%"
        # æ¸…ç†æ—¥å¿—æ–‡ä»¶
        find . -name "*.log" -mtime +7 -delete
    fi
}

# æ‰§è¡Œæ£€æŸ¥
check_service
check_disk
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
```sql
-- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
CREATE INDEX idx_knowledge_cards_category ON knowledge_cards(category);
CREATE INDEX idx_knowledge_cards_trend_score ON knowledge_cards(trend_score);
CREATE INDEX idx_posts_platform_timestamp ON raw_posts(platform, timestamp);
CREATE INDEX idx_posts_keywords ON raw_posts(keywords);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_cards_category_trend ON knowledge_cards(category, trend_score);
```

#### 2. ç¼“å­˜ç­–ç•¥
```python
# Redisç¼“å­˜é…ç½®
import redis
from datetime import timedelta

redis_client = redis.Redis(host='localhost', port=6379, db=0)

# ç¼“å­˜çƒ­ç‚¹æ•°æ®
def get_cached_trending(platform, time_window):
    cache_key = f"trending:{platform}:{time_window}"
    
    # å°è¯•ä»ç¼“å­˜è·å–
    cached_data = redis_client.get(cache_key)
    if cached_data:
        return json.loads(cached_data)
    
    # ä»æ•°æ®åº“è·å–å¹¶ç¼“å­˜
    data = fetch_from_database(platform, time_window)
    redis_client.setex(
        cache_key, 
        timedelta(hours=1), 
        json.dumps(data)
    )
    return data
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **Forké¡¹ç›®**:
   ```bash
   git clone https://github.com/your-username/meme-commons.git
   cd meme-commons
   ```

2. **åˆ›å»ºå¼€å‘åˆ†æ”¯**:
   ```bash
   git checkout -b feature/amazing-feature
   ```

3. **è®¾ç½®pre-commité’©å­**:
   ```bash
   pip install pre-commit
   pre-commit install
   ```

### ä»£ç è§„èŒƒ

#### Pythonä»£ç é£æ ¼
- éµå¾ªPEP 8æ ‡å‡†
- ä½¿ç”¨Blackæ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨isortæ•´ç†å¯¼å…¥
- ä½¿ç”¨flake8æ£€æŸ¥ä»£ç è´¨é‡

```bash
# ä»£ç æ ¼å¼åŒ–
black .
isort .
flake8 .

# ç±»å‹æ£€æŸ¥
mypy .
```

#### æäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ä¿®æ”¹
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### æµ‹è¯•

#### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_crawler.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=. --cov-report=html
```

#### é›†æˆæµ‹è¯•
```bash
# å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
./scripts/test_setup.sh

# è¿è¡ŒAPIæµ‹è¯•
pytest tests/integration/test_api.py

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
pytest tests/e2e/
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

```
MIT License

Copyright (c) 2024 meme-commons contributors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

## ğŸ“ è”ç³»æ–¹å¼

### æŠ€æœ¯æ”¯æŒ
- **é¡¹ç›®ä¸»é¡µ**: https://github.com/your-org/meme-commons
- **é—®é¢˜åé¦ˆ**: https://github.com/your-org/meme-commons/issues
- **è®¨è®ºç¤¾åŒº**: https://github.com/your-org/meme-commons/discussions

### å¼€å‘è€…
- **ç»´æŠ¤è€…**: meme-commonså›¢é˜Ÿ
- **é‚®ç®±**: meme-commons@example.com
- **å®˜ç½‘**: https://meme-commons.org

### ç¤¾åŒº
- **è´¡çŒ®è€…**: æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç ”ç©¶è€…
- **ç”¨æˆ·ç¾¤ä½“**: æ¢—æ–‡åŒ–ç ”ç©¶è€…ã€æ•°æ®ç§‘å­¦å®¶ã€AIå·¥ç¨‹å¸ˆ

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£é«˜æ€§èƒ½Webæ¡†æ¶
- [Streamlit](https://streamlit.io/) - æ•°æ®ç§‘å­¦Webåº”ç”¨æ¡†æ¶  
- [LangChain](https://github.com/langchain-ai/langchain) - LLMåº”ç”¨å¼€å‘æ¡†æ¶
- [SQLAlchemy](https://sqlalchemy.org/) - Python SQLå·¥å…·åŒ…å’ŒORM
- [Chroma](https://www.trychroma.com/) - å¼€æºå‘é‡æ•°æ®åº“
- [Requests](https://requests.readthedocs.io/) - ä¼˜é›…çš„HTTPåº“

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰æ¢—æ–‡åŒ–ç ”ç©¶è€…å’Œå¼€æºç¤¾åŒºçš„æ”¯æŒï¼

---

**ğŸ­ meme-commons - è®©æ¢—æ–‡åŒ–ç ”ç©¶æ›´æ™ºèƒ½ã€æ›´æœ‰è¶£ï¼**

*æœ€åæ›´æ–°æ—¶é—´: 2024å¹´1æœˆ15æ—¥*